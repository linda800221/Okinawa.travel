<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æ²–ç¹©å®¶åº­æ—…éŠ 2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Helvetica", "Noto Sans TC", sans-serif;
            background: #f4f7fa;
            color: #333;
        }

        header {
            background: url('https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=1400&q=60') 
                        center/cover no-repeat;
            padding: 40px 20px;
            color: white;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            text-align: center;
        }

        header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: bold;
        }

        header h2 {
            margin: 5px 0 0 0;
            font-size: 18px;
            font-weight: 400;
        }

        nav {
            display: flex;
            background: white;
            border-bottom: 1px solid #ddd;
        }

        nav button {
            flex: 1;
            padding: 15px 0;
            border: none;
            background: white;
            font-size: 16px;
            cursor: pointer;
        }

        nav button.active {
            background: #e3f2fd;
            font-weight: bold;
        }

        .page {
            display: none;
            padding: 20px;
        }

        .page.active {
            display: block;
        }

        /* è¡Œç¨‹æ¨£å¼ */
        .day-block {
            background: white;
            border-radius: 12px;
            margin-bottom: 15px;
            padding: 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        .day-title {
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
        }

        .items {
            margin-top: 10px;
            display: none;
        }

        .item {
            background: #fafafa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        input, textarea {
            width: 100%;
            padding: 6px;
            margin-top: 5px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        .button {
            padding: 8px 12px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
        }

        .delete-btn {
            background: #d32f2f;
        }

        .sub-btn {
            background: #0288d1;
        }

        img.preview {
            width: 100%;
            border-radius: 8px;
            margin-top: 8px;
        }

    </style>
</head>

<body>

<header>
    <h1>æ²–ç¹©å®¶åº­æ—…éŠ</h1>
    <h2>2026.4.6 ~ 2026.4.11</h2>
</header>

<nav>
    <button id="tab-trip" class="active">ğŸ—ºï¸ è¡Œç¨‹</button>
    <button id="tab-rate">ğŸ’± åŒ¯ç‡æ›ç®—</button>
</nav>

<!-- è¡Œç¨‹é é¢ -->
<div id="page-trip" class="page active">
    <button class="button" onclick="addDay()">ï¼‹ æ–°å¢ä¸€å¤©</button>
    <div id="day-list"></div>
</div>

<!-- åŒ¯ç‡æ›ç®—é é¢ -->
<div id="page-rate" class="page">
    <h3>åŒ¯ç‡æ›ç®—ï¼ˆå°å¹£ â‡„ æ—¥å¹£ï¼‰</h3>

    <label>è«‹è¼¸å…¥åŒ¯ç‡ï¼ˆ1 æ—¥å¹£ = ? å°å¹£ï¼‰</label>
    <input id="rate" type="number" value="0.22" step="0.01">

    <label>æ—¥å¹£ â†’ å°å¹£</label>
    <input id="jpy" type="number" oninput="convertJPY()">

    <label>å°å¹£ â†’ æ—¥å¹£</label>
    <input id="twd" type="number" oninput="convertTWD()">
</div>

<script>
/* ---------------- åˆ†é åˆ‡æ› ---------------- */
document.getElementById("tab-trip").onclick = () => switchTab("trip");
document.getElementById("tab-rate").onclick = () => switchTab("rate");

function switchTab(tab) {
    document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));

    document.getElementById("tab-" + tab).classList.add("active");
    document.getElementById("page-" + tab).classList.add("active");
}

/* ---------------- è¡Œç¨‹è³‡æ–™ç®¡ç† ---------------- */

let tripData = JSON.parse(localStorage.getItem("tripData") || "[]");
renderDays();

function save() {
    localStorage.setItem("tripData", JSON.stringify(tripData));
}

function addDay() {
    tripData.push({ title: "æœªå‘½åè¡Œç¨‹", items: [], open: true });
    save();
    renderDays();
}

function toggleDay(i) {
    tripData[i].open = !tripData[i].open;
    save();
    renderDays();
}

function addItem(dayIndex) {
    tripData[dayIndex].items.push({
        time: "",
        place: "",
        desc: "",
        map: "",
        img: ""
    });
    save();
    renderDays();
}

function deleteItem(dayIndex, itemIndex) {
    tripData[dayIndex].items.splice(itemIndex, 1);
    save();
    renderDays();
}

function handleImageUpload(event, dayIndex, itemIndex) {
    const file = event.target.files[0];
    const reader = new FileReader();
    reader.onload = () => {
        tripData[dayIndex].items[itemIndex].img = reader.result;
        save();
        renderDays();
    };
    reader.readAsDataURL(file);
}

function renderDays() {
    const container = document.getElementById("day-list");
    container.innerHTML = "";

    tripData.forEach((day, i) => {
        const block = document.createElement("div");
        block.className = "day-block";

        block.innerHTML = `
            <div class="day-title" onclick="toggleDay(${i})">
                <span contenteditable="true" oninput="tripData[${i}].title=this.innerText; save();">${day.title}</span>
                <span>${day.open ? "â–¼" : "â–¶"}</span>
            </div>

            <div class="items" style="display:${day.open ? "block" : "none"};">
                ${day.items.map((item, j) => `
                    <div class="item">
                        <label>æ™‚é–“</label>
                        <input value="${item.time}" oninput="tripData[${i}].items[${j}].time=this.value; save();">

                        <label>åœ°é»</label>
                        <input value="${item.place}" oninput="tripData[${i}].items[${j}].place=this.value; save();">

                        <label>æ–‡å­—ä»‹ç´¹</label>
                        <textarea oninput="tripData[${i}].items[${j}].desc=this.value; save();">${item.desc}</textarea>

                        <label>Google Map é€£çµ</label>
                        <input value="${item.map}" oninput="tripData[${i}].items[${j}].map=this.value; save();">

                        <label>åœ–ç‰‡ä¸Šå‚³</label>
                        <input type="file" accept="image/*" onchange="handleImageUpload(event, ${i}, ${j})">

                        ${item.img ? `<img class="preview" src="${item.img}">` : ""}

                        <button class="button delete-btn" onclick="deleteItem(${i}, ${j})">åˆªé™¤é€™ç­†</button>
                    </div>
                `).join("")}

                <button class="button sub-btn" onclick="addItem(${i})">ï¼‹ æ–°å¢è¡Œç¨‹é …ç›®</button>
            </div>
        `;

        container.appendChild(block);
    });
}

/* ---------------- åŒ¯ç‡æ›ç®— ---------------- */
function convertJPY() {
    const rate = parseFloat(rateInput.value);
    twdInput.value = (jpyInput.value * rate).toFixed(0);
}

function convertTWD() {
    const rate = parseFloat(rateInput.value);
    jpyInput.value = (twdInput.value / rate).toFixed(0);
}

const rateInput = document.getElementById("rate");
const jpyInput = document.getElementById("jpy");
const twdInput = document.getElementById("twd");

</script>
</body>
</html>
